{"ast":null,"code":"import _regeneratorRuntime from\"/home/jakob/Dokumente/2_uni/sem6/ebusiness/pvsSURL/pvsSURL/pvssurl/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jakob/Dokumente/2_uni/sem6/ebusiness/pvsSURL/pvsSURL/pvssurl/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jakob/Dokumente/2_uni/sem6/ebusiness/pvsSURL/pvsSURL/pvssurl/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Anchor,Box,Button,CheckBox,Collapsible,Heading,Select,Text,TextInput,Form}from'grommet';import{Code,Configure,Edit,Secure,Tag}from'grommet-icons';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainContent=function MainContent(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showSettings=_useState2[0],setShowSettings=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showCustomURL=_useState4[0],setShowCustomURL=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPrivate=_useState6[0],setIsPrivate=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showMaxReferences=_useState8[0],setShowMaxReferences=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showRandomizer=_useState10[0],setShowRandomizer=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),CustomURL=_useState12[0],setCustomURL=_useState12[1];var _useState13=useState(-1),_useState14=_slicedToArray(_useState13,2),MaxReferences=_useState14[0],setMaxReferences=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),Randomizer=_useState16[0],setRandomizer=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),URLInput=_useState18[0],setURLInput=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),myURL=_useState20[0],setURL=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),showResult=_useState22[0],setShowResult=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),message=_useState24[0],setMessage=_useState24[1];var _useState25=useState(\"\".concat(props.domain)),_useState26=_slicedToArray(_useState25,2),createdUrl=_useState26[0],setCreatedUrl=_useState26[1];var randomOptions=[{label:'Default',value:1},{label:'Uppercase',value:2},{label:'Lowercase',value:3},{label:'Numbers',value:4}];useEffect(function(){createShortUrl();},[myURL]);var createShortUrl=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var base,response,dataUrl;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:base=\"/api/create?url=\".concat(myURL);if(showCustomURL){base=base+\"&custom=\".concat(CustomURL);}if(isPrivate){base=base+\"&private=1\";}if(showMaxReferences){base=base+\"&refs_available=\".concat(MaxReferences);}if(showRandomizer){base=base+\"&random_method=\".concat(Randomizer.value);}else{base=base+\"&random_method=1\";}if(!(myURL.length>4)){_context.next=20;break;}_context.prev=6;_context.next=9;return fetch(base,{method:'GET',mode:'cors',cache:'no-cache',credentials:'same-origin',redirect:'follow',// manual, *follow, error\nreferrerPolicy:'no-referrer'// no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n});case 9:response=_context.sent;_context.next=12;return response.json();case 12:dataUrl=_context.sent;setMessage(dataUrl.message);if(dataUrl.hasOwnProperty('url')){setCreatedUrl(dataUrl.url);}_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](6);setMessage(\"Error connecting to Backend\");case 20:console.log(Randomizer);case 21:case\"end\":return _context.stop();}}},_callee,null,[[6,17]]);}));return function createShortUrl(){return _ref.apply(this,arguments);};}();var updateURL=function updateURL(e){setURLInput(e.target.value);};var updateMaxRef=function updateMaxRef(e){setMaxReferences(e.target.value);};var updateCustomURL=function updateCustomURL(e){setCustomURL(e.target.value);};var getURL=function getURL(e){e.preventDefault();setURL(URLInput);setShowResult(true);};return/*#__PURE__*/_jsxs(Box,{flex:true,align:\"center\",justify:\"center\",gap:\"medium\",children:[/*#__PURE__*/_jsx(Heading,{level:\"1\",children:\"PerVerSo Shorter URLs\"}),/*#__PURE__*/_jsxs(Box,{direction:\"row\",gap:\"small\",children:[/*#__PURE__*/_jsx(Button,{icon:/*#__PURE__*/_jsx(Configure,{color:\"text\"}),color:\"brand\",size:\"small\",onClick:function onClick(){setShowSettings(!showSettings);setShowCustomURL(false);setIsPrivate(false);setShowMaxReferences(false);setShowRandomizer(false);}}),/*#__PURE__*/_jsxs(Box,{width:\"large\",direction:\"row\",align:\"center\",pad:{horizontal:'small',vertical:'xsmall'},round:\"small\",border:{side:'all',color:'brand'},children:[/*#__PURE__*/_jsx(Code,{color:\"brand\"}),/*#__PURE__*/_jsx(TextInput,{plain:true,placeholder:\"Enter your URL...\",onChange:updateURL})]}),/*#__PURE__*/_jsx(Form,{onSubmit:getURL,children:/*#__PURE__*/_jsx(Button,{label:\"Shorten\",color:\"brand\",type:\"submit\",fill:\"true\"})})]}),/*#__PURE__*/_jsx(Collapsible,{direction:\"vertical\",open:showResult,children:/*#__PURE__*/_jsx(Box,{width:\"large\",children:function(){if(createdUrl.length>0){return/*#__PURE__*/_jsxs(Text,{size:\"medium\",color:\"brand\",children:[\"Your URL \",/*#__PURE__*/_jsx(Anchor,{href:createdUrl,label:createdUrl,color:\"brand\"}),\" was created\"]});}else{return/*#__PURE__*/_jsx(Text,{size:\"medium\",color:\"test\",children:message});}}()})}),/*#__PURE__*/_jsx(Collapsible,{direction:\"vertical\",open:showSettings,children:/*#__PURE__*/_jsxs(Box,{flex:true,direction:\"column\",align:\"center\",justify:\"center\",gap:\"medium\",children:[/*#__PURE__*/_jsxs(Box,{width:\"large\",direction:\"row\",align:\"center\",gap:\"medium\",children:[/*#__PURE__*/_jsx(CheckBox,{toggle:true,label:\"Custom tag\",onClick:function onClick(){return setShowCustomURL(!showCustomURL);}}),/*#__PURE__*/_jsx(Collapsible,{direction:\"horizontal\",open:showCustomURL,children:/*#__PURE__*/_jsx(Box,{width:\"large\",direction:\"row\",justify:\"end\",children:/*#__PURE__*/_jsxs(Box,{width:\"medium\",direction:\"row\",align:\"center\",justify:\"end\",pad:{horizontal:'small',vertical:'xsmall'},round:\"small\",border:{side:'all',color:'brand'},children:[/*#__PURE__*/_jsx(Tag,{color:\"brand\"}),/*#__PURE__*/_jsx(TextInput,{plain:true,placeholder:\"Enter custom tag...\",onChange:updateCustomURL})]})})})]}),/*#__PURE__*/_jsxs(Box,{width:\"large\",direction:\"row\",align:\"center\",gap:\"medium\",children:[/*#__PURE__*/_jsx(CheckBox,{toggle:true,label:\"Set max. references\",onClick:function onClick(){return setShowMaxReferences(!showMaxReferences);}}),/*#__PURE__*/_jsx(Collapsible,{direction:\"horizontal\",open:showMaxReferences,children:/*#__PURE__*/_jsx(Box,{width:\"large\",direction:\"row\",justify:\"end\",children:/*#__PURE__*/_jsxs(Box,{width:\"medium\",direction:\"row\",align:\"center\",justify:\"end\",pad:{horizontal:'small',vertical:'xsmall'},round:\"small\",border:{side:'all',color:'brand'},children:[/*#__PURE__*/_jsx(Edit,{color:\"brand\"}),/*#__PURE__*/_jsx(TextInput,{plain:true,placeholder:\"Enter max. References...\",onChange:updateMaxRef})]})})})]}),/*#__PURE__*/_jsxs(Box,{width:\"large\",direction:\"row\",align:\"start\",gap:\"small\",children:[/*#__PURE__*/_jsx(CheckBox,{toggle:true,label:\"Is private\",onClick:function onClick(){return setIsPrivate(!isPrivate);}}),/*#__PURE__*/_jsx(Collapsible,{direction:\"horizontal\",open:isPrivate,children:/*#__PURE__*/_jsx(Secure,{color:\"brand\"})})]}),/*#__PURE__*/_jsxs(Box,{width:\"large\",direction:\"row\",align:\"center\",gap:\"medium\",children:[/*#__PURE__*/_jsx(CheckBox,{toggle:true,label:\"Special randomizer\",onClick:function onClick(){return setShowRandomizer(!showRandomizer);}}),/*#__PURE__*/_jsx(Collapsible,{direction:\"horizontal\",open:showRandomizer,children:/*#__PURE__*/_jsx(Box,{width:\"large\",direction:\"row\",justify:\"end\",children:/*#__PURE__*/_jsxs(Box,{width:\"medium\",direction:\"row\",align:\"center\",justify:\"start\",pad:{horizontal:'small',vertical:'xsmall'},round:\"small\",border:{side:'all',color:'brand'},children:[/*#__PURE__*/_jsx(Tag,{color:\"brand\"}),/*#__PURE__*/_jsx(Select,{placeholder:\"Select randomizer...\",options:randomOptions,labelKey:\"label\",valueKey:\"value\",onChange:function onChange(_ref2){var option=_ref2.option;return setRandomizer(option);},dropHeight:\"small\",plain:true})]})})})]})]})})]});};export default MainContent;","map":{"version":3,"sources":["/home/jakob/Dokumente/2_uni/sem6/ebusiness/pvsSURL/pvsSURL/pvssurl/src/components/MainContent.js"],"names":["React","useEffect","useState","Anchor","Box","Button","CheckBox","Collapsible","Heading","Select","Text","TextInput","Form","Code","Configure","Edit","Secure","Tag","MainContent","props","showSettings","setShowSettings","showCustomURL","setShowCustomURL","isPrivate","setIsPrivate","showMaxReferences","setShowMaxReferences","showRandomizer","setShowRandomizer","CustomURL","setCustomURL","MaxReferences","setMaxReferences","Randomizer","setRandomizer","URLInput","setURLInput","myURL","setURL","showResult","setShowResult","message","setMessage","domain","createdUrl","setCreatedUrl","randomOptions","label","value","createShortUrl","base","length","fetch","method","mode","cache","credentials","redirect","referrerPolicy","response","json","dataUrl","hasOwnProperty","url","console","log","updateURL","e","target","updateMaxRef","updateCustomURL","getURL","preventDefault","horizontal","vertical","side","color","option"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { \n  Anchor,\n  Box, \n  Button,\n  CheckBox, \n  Collapsible,\n  Heading, \n  Select,\n  Text,\n  TextInput,\n  Form\n} from 'grommet';\nimport { \n  Code, \n  Configure,\n  Edit,\n  Secure,\n  Tag \n} from 'grommet-icons';\n\n\nconst MainContent = (props) => {\n\n  const [showSettings, setShowSettings] = useState(false);\n  const [showCustomURL, setShowCustomURL] = useState(false);\n  const [isPrivate, setIsPrivate] = useState(false);\n  const [showMaxReferences, setShowMaxReferences] = useState(false);\n  const [showRandomizer, setShowRandomizer] = useState(false);\n  const [CustomURL, setCustomURL] = useState('');\n  const [MaxReferences, setMaxReferences] = useState(-1);\n  const [Randomizer, setRandomizer] = useState(1);\n\n  const [URLInput, setURLInput] = useState('');\n  const [myURL, setURL] = useState('');\n\n\n  const [showResult, setShowResult] = useState(false);\n  const [message, setMessage] = useState(\"\");\n\n  const [createdUrl, setCreatedUrl] = useState(`${props.domain}`);\n\n  const randomOptions = [\n    { label: 'Default', value: 1 },\n    { label: 'Uppercase', value: 2 },\n    { label: 'Lowercase', value: 3 },\n    { label: 'Numbers', value: 4 },\n  ];\n\n  useEffect(() => {\n    createShortUrl();\n  }, [myURL]);\n\n  const createShortUrl = async () => {\n    var base = `/api/create?url=${myURL}`;\n    if(showCustomURL){\n      base= base + `&custom=${CustomURL}`;\n    }\n    if(isPrivate){\n      base= base + \"&private=1\";\n    }\n    if(showMaxReferences){\n      base=base + `&refs_available=${MaxReferences}`;\n    }\n    if(showRandomizer){\n      base=base + `&random_method=${Randomizer.value}`;\n    }else{\n      base=base + `&random_method=1`;\n    }\n    if(myURL.length>4){\n    try{\n      const response = await fetch(base, {method: 'GET',\n          mode: 'cors',\n          cache: 'no-cache',\n          credentials: 'same-origin',\n          redirect: 'follow', // manual, *follow, error\n          referrerPolicy: 'no-referrer', // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n        });\n      const dataUrl = await response.json();\n      setMessage(dataUrl.message);\n      if(dataUrl.hasOwnProperty('url')){\n        setCreatedUrl(dataUrl.url);\n      }\n    } catch(error){\n      setMessage(\"Error connecting to Backend\")\n    }\n    \n    }\n    console.log(Randomizer);\n  };\n\n  \n\n  const updateURL = e => {\n    setURLInput(e.target.value);\n  };\n  const updateMaxRef = e => {\n    setMaxReferences(e.target.value);\n  };\n  const updateCustomURL = e => {\n    setCustomURL(e.target.value);\n  };\n  \n  const getURL = e => {\n    e.preventDefault();\n    setURL(URLInput);\n    setShowResult(true);\n  };\n\n  return(\n  <Box\n  flex\n  align='center'\n  justify='center'\n  gap='medium'\n  >\n    \n    <Heading level='1'>PerVerSo Shorter URLs</Heading>\n    <Box direction='row' gap='small'>\n\n    <Button \n      icon={<Configure color='text'/>}\n      color='brand'\n      size='small'\n      onClick={() => {setShowSettings(!showSettings);\n      setShowCustomURL(false);\n      setIsPrivate(false);\n      setShowMaxReferences(false);\n      setShowRandomizer(false);\n      }}\n    />\n    \n    <Box\n      width=\"large\"\n      direction=\"row\"\n      align=\"center\"\n      pad={{ horizontal: 'small', vertical: 'xsmall' }}\n      round=\"small\"\n      border={{\n        side: 'all',\n        color: 'brand',\n      }}\n    >\n      <Code color='brand'/>\n      <TextInput \n      plain\n      placeholder='Enter your URL...'\n      onChange={updateURL}\n      /> \n    </Box>\n\n      <Form onSubmit={getURL}>\n        <Button\n          label='Shorten'\n          color='brand'\n          type='submit'\n          fill='true'\n        />\n      </Form>\n      \n    </Box>\n\n    <Collapsible direction='vertical' open={showResult}>\n      <Box\n      width='large'\n      >\n        \n        {(() => {\n          if (createdUrl.length>0) {\n            return (\n              <Text size='medium' color='brand'>Your URL <Anchor href={createdUrl} label={createdUrl} color='brand'/> was created</Text>\n            )\n          } else {\n            return (\n              <Text size='medium' color='test'>{message}</Text>\n            )\n          } \n          })()}\n        \n      </Box>\n    </Collapsible>\n\n    <Collapsible direction='vertical' open={showSettings}>\n      <Box\n      flex\n      direction='column'\n      align='center'\n      justify='center'\n      gap='medium'\n      >\n        <Box\n          width=\"large\"\n          direction=\"row\"\n          align=\"center\"\n          gap='medium'\n        >\n          <CheckBox\n            toggle\n            label='Custom tag'\n            onClick={() => setShowCustomURL(!showCustomURL)}\n          />\n          <Collapsible direction='horizontal' open={showCustomURL}>\n            <Box width='large' direction='row' justify='end'>\n              <Box\n                width=\"medium\"\n                direction=\"row\"\n                align=\"center\"\n                justify='end'\n                pad={{ horizontal: 'small', vertical: 'xsmall' }}\n                round=\"small\"\n                border={{\n                  side: 'all',\n                  color: 'brand',\n                }}\n              >\n                <Tag color='brand'/>\n                <TextInput \n                plain\n                placeholder='Enter custom tag...'\n                onChange={updateCustomURL}\n                /> \n              </Box>\n            </Box>\n          </Collapsible>\n        </Box>\n        <Box\n          width=\"large\"\n          direction=\"row\"\n          align=\"center\"\n          gap='medium'\n        >\n          <CheckBox\n            toggle\n            label='Set max. references'\n            onClick={() => setShowMaxReferences(!showMaxReferences)}\n          />\n          <Collapsible direction='horizontal' open={showMaxReferences}>\n            <Box width='large' direction='row' justify='end'>\n              <Box\n                width=\"medium\"\n                direction=\"row\"\n                align=\"center\"\n                justify='end'\n                pad={{ horizontal: 'small', vertical: 'xsmall' }}\n                round=\"small\"\n                border={{\n                  side: 'all',\n                  color: 'brand',\n                }}\n              >\n                <Edit color='brand'/>\n                <TextInput \n                plain\n                placeholder='Enter max. References...'\n                onChange={updateMaxRef}\n                /> \n              </Box>\n            </Box>\n          </Collapsible>\n        </Box>\n        <Box\n          width=\"large\"\n          direction=\"row\"\n          align=\"start\"\n          gap='small'\n        >\n          <CheckBox\n            toggle\n            label='Is private'\n            onClick={() => setIsPrivate(!isPrivate)}\n          />\n          <Collapsible direction='horizontal' open={isPrivate}>\n            <Secure color='brand'/>\n          </Collapsible>\n        </Box>\n        <Box\n          width=\"large\"\n          direction=\"row\"\n          align=\"center\"\n          gap='medium'\n        >\n          <CheckBox\n            toggle\n            label='Special randomizer'\n            onClick={() => setShowRandomizer(!showRandomizer)}\n          />\n          <Collapsible direction='horizontal' open={showRandomizer}>\n            <Box width='large' direction='row' justify='end'>\n              <Box\n                width=\"medium\"\n                direction=\"row\"\n                align=\"center\"\n                justify='start'\n                pad={{ horizontal: 'small', vertical: 'xsmall' }}\n                round=\"small\"\n                border={{\n                  side: 'all',\n                  color: 'brand',\n                }}\n              >\n                <Tag color='brand'/>\n                <Select \n                placeholder='Select randomizer...'\n                options={randomOptions}\n                labelKey=\"label\"\n                valueKey=\"value\"\n                onChange={({ option }) => setRandomizer(option)}\n                dropHeight='small'\n                plain\n                />\n              </Box>\n            </Box>\n          </Collapsible>\n        </Box>\n      \n      </Box>\n    </Collapsible>\n\n  </Box>\n  );\n}\n\nexport default MainContent;"]},"metadata":{},"sourceType":"module"}